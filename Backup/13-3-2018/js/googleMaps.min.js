var thessaloniki={lat:40.6210354,lng:22.9367118};var infoWindow;var map;var markers=[];var myLocationMarker=[];var searchMarker=[];var flightPath;var places;var mylocation=null;var daySelected;var directionsService;var directionsDisplay;var min=100000;var minLocation;var pos;var request;var j;var karaiskaki={position:{lat:40.614216,lng:22.956407},title:"Καραϊσκάκη (Δευτέρα)",flightPlanCoordinates:[{lat:40.614324,lng:22.954168},{lat:40.61412,lng:22.957704},{lat:40.614218,lng:22.95601},{lat:40.614664,lng:22.956026},{lat:40.615131,lng:22.956048},{lat:40.615704,lng:22.955989}]};var allatini={position:{lat:40.608893,lng:22.959352},title:"Αλλατίνη (Δευτέρα)"};var gianniAggelou={position:{lat:40.599781,lng:22.972742},title:"Γιάννη Αγγέλου (γήπεδο ΑΡΗ)(Δευτέρα)"};var katwToumpa={position:{lat:40.608795,lng:22.973369},title:"Κάτω Τούμπα (Αρτάκης)(Δευτέρα)"};var anwToumpa={position:{lat:40.61784,lng:22.974975},title:"Άνω Τούμπα (Εμπεδοκλέους)(Δευτέρα)"};var anwIlioupoli={position:{lat:40.671243,lng:22.932063},title:"Άνω Ηλιούπολη (Δευτέρα)"};var menemeni={position:{lat:40.657189,lng:22.909962},title:"Μενεμένη (Δευτέρα)"};var neapoliMitropoleos={position:{lat:40.654462,lng:22.948576},title:"Νεάπολη Μητροπόλεως (Δευτέρα)"};var sarantaEkklisies={position:{lat:40.633087,lng:22.964365},title:"40 Εκκλησιές (Τρίτη)",flightPlanCoordinates:[{lat:40.633132,lng:22.964327},{lat:40.633017,lng:22.964427},{lat:40.63247,lng:22.965636}]};var papadaki={position:{lat:40.592971,lng:22.96242},title:"Παπαδάκη (Τρίτη)"};var katwIlioupoli={position:{lat:40.664885,lng:22.924283},title:"Κάτω Ηλιούπολη (Ευόσμου)(Τρίτη)"};var zwodoxouPigis={position:{lat:40.653874,lng:22.917734},title:"Ζωοδόχου Πηγής (Αμπελοκήπων)(Τρίτη)"};var eleutherioKordelio={position:{lat:40.666004,lng:22.898104},title:"Ελευθέριο Κορδελιό (Τρίτη)"};var malakopiPulaias={position:{lat:40.609184,lng:22.981907},title:"Μαλακοπή Πυλαίας (Τρίτη)"};var neaKriniKalamaria={position:{lat:40.567952,lng:22.961275},title:"Ν.Κρήνη Καλαμαριά (Τρίτη)"};var dimarxeioEuosmou={position:{lat:40.670076,lng:22.91021},title:"Δημαρχείο Ευόσμου (Τρίτη)"};var ormiliasBoga={position:{lat:40.598441,lng:22.953534},title:"Ορμυλίας - Κίμ. Βογά (Τρίτη)"};var kanariPolixnis={position:{lat:40.659422,lng:22.943165},title:"Κανάρη Πολίχνης (Τρίτη)"};var anwToumpaPaok={position:{lat:40.615827,lng:22.972914},title:"Άνω Τούμπα (γήπεδο ΠΑΟΚ)(Τετάρτη)"};var solonosKritis={position:{lat:40.599661,lng:22.958168},title:"Σόλωνος - Κρήτης (Τετάρτη)"};var litoxorou={position:{lat:40.621261,lng:22.961052},title:"Λιτοχώρου (Παπάφη)(Τετάρτη)"};var paulouMela={position:{lat:40.657485,lng:22.932348},title:"Π.Μελά (Σταυρούπολη)(Τετάρτη)"};var sukies={position:{lat:40.65051,lng:22.94807},title:"Ρήγα Φεραίου (Συκιές)(Τετάρτη)"};var davakiSukies={position:{lat:40.644968,lng:22.952959},title:"Συνταγματάρχου Δαβάκη (Συκιές)(Τετάρτη)"};var flemingPolixni={position:{lat:40.668732,lng:22.941738},title:"Φλέμινγκ (Πολίχνη)(Τετάρτη)"};var kalamariaAmisou={position:{lat:40.585438,lng:22.951895},title:"Καλαμαριά Αμισού (Πέμπτης)"};var kanari={position:{lat:40.607259,lng:22.968076},title:"Κανάρη (Αλ.Παπαναστασίου)(Πέμπτης)"};var kalithea={position:{lat:40.645452,lng:22.93982},title:"Καλλιθέα (Όπισθεν Υδραγωγείου)(Πέμπτης)",flightPlanCoordinates:[{lat:40.64503,lng:22.939437},{lat:40.645992,lng:22.940274},{lat:40.646397,lng:22.940073},{lat:40.646999,lng:22.939305}]};var gkratsiou={position:{lat:40.641176,lng:22.946566},title:"Κων/νου Γκάρτσιου (περιοχή Αγ.Δημητρίου)(Πέμπτης)",flightPlanCoordinates:[{lat:40.641855,lng:22.946301},{lat:40.64055,lng:22.94685},{lat:40.640474,lng:22.946859},{lat:40.640245,lng:22.946665},{lat:40.640474,lng:22.946859},{lat:40.64055,lng:22.94685},{lat:40.640725,lng:22.947357}]};var polixniFilippou={position:{lat:40.659576,lng:22.949581},title:"Φιλίππου (Πολίχνη)(Πέμπτης)"};var paulouMelaPulaia={position:{lat:40.598852,lng:22.991117},title:"Παύλου Μελά (Πυλαία)(Πέμπτης)"};var agPaulos={position:{lat:40.639921,lng:22.961981},title:"Ηπείρου (Άγιος Παύλος)(Πέμπτης)"};var foinikas={position:{lat:40.571487,lng:22.971594},title:"Εθν.Αντιστάσεως (Φοίνικας)(Πέμπτης)"};var dedropotamos={position:{lat:40.656793,lng:22.899468},title:"Δενδροπόταμος (Μενεμένης)(Πέμπτης)"};var nikopoli={position:{lat:0.682993,lng:22.933828},title:"Νικόπολη (Σταυρούπολη)(Πέμπτης)"};var triandria={position:{lat:40.620231,lng:22.971845},title:"Ορτανσίας (Τριανδρία)(Παρασκευή)"};var xatzilazarou={position:{lat:40.606243,lng:22.956143},title:"Χατζηλαζάρου (Μπότσαρη)(Παρασκευή)"};var kifisiaKalamaria={position:{lat:40.58665,lng:22.967149},title:"Κηφισιά (Καλαμαριά)(Παρασκευή)"};var stauroupoli={position:{lat:40.664176,lng:22.935685},title:"Μεσολογγίου (Σταυρούπολη)(Παρασκευή)"};var euosmosParko={position:{lat:40.663723,lng:22.911749},title:"Πάρκο Ελπίδος (Εύοσμος)(Παρασκευή)"};var kautatzoglou={position:{lat:40.621781,lng:22.954716},title:"Καυτατζόγλου (Παρασκευή)",flightPlanCoordinates:[{lat:40.623345,lng:22.955977},{lat:40.622706,lng:22.95333},{lat:40.622897,lng:22.95418},{lat:40.62236,lng:22.954518},{lat:40.621818,lng:22.954636}]};var meteoraPolixnis={position:{lat:40.65637,lng:22.957325},title:"Μετέωρα (Πολίχνης)(Παρασκευή)"};var andromaxis={position:{lat:40.676204,lng:22.902111},title:"Ανδρομάχης Ευόσμου (Παρασκευή)"};var martiou={position:{lat:40.599412,lng:22.962763},title:"Μαρτίου (Σαββάτου)"};var ksirokrini={position:{lat:40.649833,lng:22.928589},title:"Ξηροκρήνη (Αμπελόκηποι)(Σαββάτου)"};var neapoli={position:{lat:40.653631,lng:22.936513},title:"Αγ.Στεφάνου (Νεάπολη)(Σαββάτου)"};var pausania={position:{lat:40.614206,lng:22.981209},title:"Παυσανία (Άνω Τούμπα)(Σαββάτου)"};var kordelio={position:{lat:40.671766,lng:22.892302},title:"Σιατίστης (Κορδελιό)(Σαββάτου)"};var agNikolaos={position:{lat:40.576257,lng:22.951476},title:"Άγιος Νικόλαος (Καλαμαριά)(Σαββάτου)"};var euosmos={position:{lat:40.676754,lng:22.923335},title:"Ιθάκης (Εύοσμος)(Σαββάτου)"};var olesOiLaikes=[karaiskaki,allatini,gianniAggelou,katwToumpa,anwToumpa,anwIlioupoli,menemeni,neapoliMitropoleos,sarantaEkklisies,papadaki,katwIlioupoli,zwodoxouPigis,eleutherioKordelio,malakopiPulaias,neaKriniKalamaria,dimarxeioEuosmou,ormiliasBoga,kanariPolixnis,anwToumpaPaok,solonosKritis,litoxorou,paulouMela,sukies,davakiSukies,flemingPolixni,kalamariaAmisou,kanari,kalithea,gkratsiou,polixniFilippou,paulouMelaPulaia,agPaulos,foinikas,dedropotamos,nikopoli,triandria,xatzilazarou,kifisiaKalamaria,stauroupoli,euosmosParko,kautatzoglou,meteoraPolixnis,andromaxis,martiou,ksirokrini,neapoli,pausania,kordelio,agNikolaos,euosmos];var laikesDeuteras=[karaiskaki,allatini,gianniAggelou,katwToumpa,anwToumpa,anwIlioupoli,menemeni,neapoliMitropoleos];var laikesTritis=[sarantaEkklisies,papadaki,katwIlioupoli,zwodoxouPigis,eleutherioKordelio,malakopiPulaias,neaKriniKalamaria,dimarxeioEuosmou,ormiliasBoga,kanariPolixnis];var laikesTetartis=[anwToumpaPaok,solonosKritis,litoxorou,paulouMela,sukies,davakiSukies,flemingPolixni];var laikesPemptis=[kalamariaAmisou,kanari,kalithea,gkratsiou,polixniFilippou,paulouMelaPulaia,agPaulos,foinikas,dedropotamos,nikopoli];var laikesParaskeuis=[triandria,xatzilazarou,kifisiaKalamaria,stauroupoli,euosmosParko,kautatzoglou,meteoraPolixnis,andromaxis];var laikesSavvatou=[martiou,ksirokrini,neapoli,pausania,kordelio,agNikolaos,euosmos];function dropAll(){daySelected="all";resetLaikes();for(var a=0;a<olesOiLaikes.length;a++){addMarkerWithTimeout(olesOiLaikes[a],a*30)}}function dropMonday(){daySelected="monday";resetLaikes();for(var a=0;a<laikesDeuteras.length;a++){addMarkerWithTimeout(laikesDeuteras[a],a*100)}}function dropTuesday(){daySelected="tuesday";resetLaikes();for(var a=0;a<laikesTritis.length;a++){addMarkerWithTimeout(laikesTritis[a],a*100)}}function dropWednesday(){daySelected="wednesday";resetLaikes();for(var a=0;a<laikesTetartis.length;a++){addMarkerWithTimeout(laikesTetartis[a],a*100)}}function dropThursday(){daySelected="thursday";resetLaikes();for(var a=0;a<laikesPemptis.length;a++){addMarkerWithTimeout(laikesPemptis[a],a*100)}}function dropFriday(){daySelected="friday";resetLaikes();for(var a=0;a<laikesParaskeuis.length;a++){addMarkerWithTimeout(laikesParaskeuis[a],a*100)}}function dropSaturday(){daySelected="saturday";resetLaikes();for(var a=0;a<laikesSavvatou.length;a++){addMarkerWithTimeout(laikesSavvatou[a],a*100)}}function clearMarkers(){for(var a=0;a<markers.length;a++){markers[a].setMap(null)}markers=[]}function clearSearchMarkers(){for(var a=0;a<searchMarker.length;a++){searchMarker[a].setMap(null)}searchMarker=[]}function clearMyLocationMarker(){for(var a=0;a<myLocationMarker.length;a++){myLocationMarker[a].setMap(null)}myLocationMarker=[];mylocation=null}function initMap(){directionsService=new google.maps.DirectionsService;directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true});var b={disableDefaultUI:true,zoom:12,center:thessaloniki,zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER}};map=new google.maps.Map(document.getElementById("map"),b);directionsDisplay.setMap(map);var a=document.getElementById("pac-input");var c=new google.maps.places.SearchBox(a);map.controls[google.maps.ControlPosition.TOP_RIGHT].push(a);map.addListener("bounds_changed",function(){c.setBounds(map.getBounds())});c.addListener("places_changed",function(){places=c.getPlaces();if(places.length==0){return}searchMarker.forEach(function(e){e.setMap(null)});searchMarker=[];var d=new google.maps.LatLngBounds();places.forEach(function(e){if(!e.geometry){console.log("Returned place contains no geometry");return}var f={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};var g;g=new google.maps.Marker({map:map,icon:f,title:e.name,position:e.geometry.location});g.addListener("click",function(){map.setZoom(19);map.setCenter(e.geometry.location);pos={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}});searchMarker.push(g);if(e.geometry.viewport){d.union(e.geometry.viewport)}else{d.extend(e.geometry.location)}});map.fitBounds(d)});document.getElementById("directions").addEventListener("click",findNearestPlace)}function findNearestPlace(){console.log("again");min=10000;var b=null;if(daySelected=="monday"){b=laikesDeuteras}else{if(daySelected=="tuesday"){b=laikesTritis}else{if(daySelected=="wednesday"){b=laikesTetartis}else{if(daySelected=="thursday"){b=laikesPemptis}else{if(daySelected=="friday"){b=laikesParaskeuis}else{if(daySelected=="saturday"){b=laikesSavvatou}else{if(daySelected=="all"){b=olesOiLaikes}}}}}}}j=b.length;while(j--){c(pos.lat,pos.lng,b[j].position.lat,b[j].position.lng);function c(g,k,f,i){var h=6371;var m=a(f-g);var e=a(i-k);var o=Math.sin(m/2)*Math.sin(m/2)+Math.cos(a(g))*Math.cos(a(f))*Math.sin(e/2)*Math.sin(e/2);var n=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));var l=h*n;if(l<=min){min=l;minLocation=b[j];console.log(minLocation)}}function a(d){return d*(Math.PI/180)}}request={origin:pos,destination:minLocation.position,travelMode:google.maps.TravelMode.WALKING};directionsService.route(request,function(e,d){console.log(d);if(d===google.maps.DirectionsStatus.OK){console.log(e);directionsDisplay.setDirections(e)}else{if(d===google.maps.DirectionsStatus.OVER_QUERY_LIMIT){console.log("error")}}})}function addMarkerWithTimeout(a,b){window.setTimeout(function(){var c=new google.maps.Marker({position:a.position,map:map,animation:google.maps.Animation.DROP,title:a.title,icon:"icons/farmstand.png"});c.addListener("click",function(){map.setZoom(18);map.setCenter(c.getPosition());flightPath=new google.maps.Polyline({path:a.flightPlanCoordinates,geodesic:true,strokeColor:"#2aff4d",strokeOpacity:1,strokeWeight:10});flightPath.setMap(map)});markers.push(c)},b)}function dropMyLocation(){clearMyLocationMarker();infoWindow=new google.maps.InfoWindow;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){pos={lat:a.coords.latitude,lng:a.coords.longitude};pos2={lat:a.coords.latitude,lng:a.coords.longitude};mylocation=new google.maps.Marker({position:pos,map:map,animation:google.maps.Animation.DROP,title:"Η τοποθεσία μου",icon:"icons/home-2.png"});mylocation.addListener("click",function(){pos=pos2;map.setZoom(19);map.setCenter(pos)});myLocationMarker.push(mylocation);map.setZoom(14);map.setCenter(pos)},function(){handleLocationError(true,infoWindow,map.getCenter())})}else{handleLocationError(false,infoWindow,map.getCenter())}}function resetLocation(){var a={zoom:12,center:{lat:40.6210354,lng:22.9367118}};map.setZoom(a.zoom);map.setCenter(a.center);clearMarkers();markers=[];clearSearchMarkers();searchMarker=[];if(flightPath!=null){flightPath.setMap(null)}directionsDisplay.set("directions",null)}function resetLaikes(){var a={zoom:12,center:{lat:40.6210354,lng:22.9367118}};map.setZoom(a.zoom);map.setCenter(a.center);clearMarkers();markers=[];if(flightPath!=null){flightPath.setMap(null)}directionsDisplay.set("directions",null)}function handleLocationError(a,b,c){b.setPosition(c);b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.");b.open(map)}document.getElementById("year").innerHTML=new Date().getFullYear();